<!DOCTYPE html>
<html>
<head>
<title>The Hobbit: Routine at 9E34</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="40409.html">9DD9</a>
</td>
<td class="up">Up: <a href="../maps/all.html#9e34">Map</a></td>
<td class="next">
Next: <a href="40570.html">9E7A</a>
</td>
</tr>
</table>
<div class="description">9E34: Routine at 9E34</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="38381.html">LocationLit</a>, <a href="40409.html">9DD9</a>, <a href="40852.html">9F94</a> and <a href="42305.html">ActionClimbOut</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="9e34"></span>9E34</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Stash <span class="register">IX</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="9e36"></span>9E36</td>
<td class="instruction">LD IX,($B70C)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="46810.html#b70c">ptrCurObject</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="9e3a"></span>9E3A</td>
<td class="instruction">CALL $9E40</td>
<td class="comment-1" rowspan="1">Call <a href="40500.html#9e40">9E40</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="9e3d"></span>9E3D</td>
<td class="instruction">POP IX</td>
<td class="comment-1" rowspan="1">Restore <span class="register">IX</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="9e3f"></span>9E3F</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9e40"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="40409.html">9DD9</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="9e40"></span>9E40</td>
<td class="instruction">BIT 7,(IY+$07)</td>
<td class="comment-1" rowspan="2">Return if the object is not "visible".</td>
</tr>
<tr>
<td class="address-1"><span id="9e44"></span>9E44</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="address-1"><span id="9e45"></span>9E45</td>
<td class="instruction">PUSH IY</td>
<td class="comment-1" rowspan="3">Stash <span class="register">IY</span>, <span class="register">IX</span> and <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="9e47"></span>9E47</td>
<td class="instruction">PUSH IX</td>
</tr>
<tr>
<td class="address-1"><span id="9e49"></span>9E49</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="address-1"><span id="9e4a"></span>9E4A</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=the object ID.</td>
</tr>
<tr>
<td class="address-1"><span id="9e4b"></span>9E4B</td>
<td class="instruction">LD C,(IX+$10)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=your current location ID.</td>
</tr>
<tr>
<td class="address-1"><span id="9e4e"></span>9E4E</td>
<td class="instruction">PUSH IY</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e50"></span>9E50</td>
<td class="instruction">CALL <a href="40570.html">ContainerLit</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e53"></span>9E53</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e54"></span>9E54</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e55"></span>9E55</td>
<td class="instruction">POP IX</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e57"></span>9E57</td>
<td class="instruction">JR Z,$9E72</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e59"></span>9E59</td>
<td class="instruction">CALL <a href="40570.html">ContainerLit</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e5c"></span>9E5C</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e5d"></span>9E5D</td>
<td class="instruction">JR NZ,$9E6F</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e5f"></span>9E5F</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e60"></span>9E60</td>
<td class="instruction">JR NZ,$9E72</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e62"></span>9E62</td>
<td class="instruction">LD B,(IY+$00)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e65"></span>9E65</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9e66"></span>9E66</td>
<td class="instruction">CP (IY+$10)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e69"></span>9E69</td>
<td class="instruction">JR Z,$9E72</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e6b"></span>9E6B</td>
<td class="instruction">INC IY</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e6d"></span>9E6D</td>
<td class="instruction">DJNZ $9E66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9e6f"></span>9E6F</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9e70"></span>9E70</td>
<td class="instruction">JR $9E74</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9e72"></span>9E72</td>
<td class="instruction">OR $01</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9e74"></span>9E74</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="3">Restore <span class="register">BC</span>, <span class="register">IX</span> and <span class="register">IY</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="9e75"></span>9E75</td>
<td class="instruction">POP IX</td>
</tr>
<tr>
<td class="address-1"><span id="9e77"></span>9E77</td>
<td class="instruction">POP IY</td>
</tr>
<tr>
<td class="address-1"><span id="9e79"></span>9E79</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="40409.html">9DD9</a>
</td>
<td class="up">Up: <a href="../maps/all.html#9e34">Map</a></td>
<td class="next">
Next: <a href="40570.html">9E7A</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1982 Melbourne House</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.5.</div>
</footer>
</body>
</html>