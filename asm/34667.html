<!DOCTYPE html>
<html>
<head>
<title>The Hobbit: Routine at 876B</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="34459.html">869B</a>
</td>
<td class="up">Up: <a href="../maps/all.html#34667">Map</a></td>
<td class="next">
Next: <a href="34761.html">87C9</a>
</td>
</tr>
</table>
<div class="description">876B: Scroll Line</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="34459.html">869B</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ScrollLine</td>
<td class="address-2"><span id="34667"></span>876B</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="4">Push <span class="register">AF</span>, <span class="register">BC</span>, <span class="register">HL</span> and <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34668"></span>876C</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34669"></span>876D</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34670"></span>876E</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34671"></span>876F</td>
<td class="instruction">LD HL,$4020</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34674"></span>8772</td>
<td class="instruction">LD DE,$4000</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34677"></span>8775</td>
<td class="instruction">LD A,$11</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34679"></span>8777</td>
<td class="instruction">LD B,$00</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ScrollLine_0</td>
<td class="address-2"><span id="34681"></span>8779</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34682"></span>877A</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34683"></span>877B</td>
<td class="instruction">LD C,$08</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ScrollLine_1</td>
<td class="address-2"><span id="34685"></span>877D</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34686"></span>877E</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34687"></span>877F</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34688"></span>8780</td>
<td class="instruction">LD C,$20</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34690"></span>8782</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34692"></span>8784</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34693"></span>8785</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34694"></span>8786</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34695"></span>8787</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34696"></span>8788</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34697"></span>8789</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34698"></span>878A</td>
<td class="instruction">JR NZ,<a href="34667.html#34685">ScrollLine_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34700"></span>878C</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34701"></span>878D</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34702"></span>878E</td>
<td class="instruction">LD C,$20</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34704"></span>8790</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34705"></span>8791</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34706"></span>8792</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34707"></span>8793</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34708"></span>8794</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34709"></span>8795</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34710"></span>8796</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34712"></span>8798</td>
<td class="instruction">JR Z,<a href="34667.html#34718">ScrollLine_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34714"></span>879A</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34715"></span>879B</td>
<td class="instruction">ADD A,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34717"></span>879D</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ScrollLine_2</td>
<td class="address-2"><span id="34718"></span>879E</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34719"></span>879F</td>
<td class="instruction">AND $07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34721"></span>87A1</td>
<td class="instruction">JR Z,<a href="34667.html#34727">ScrollLine_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34723"></span>87A3</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34724"></span>87A4</td>
<td class="instruction">ADD A,$07</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34726"></span>87A6</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">ScrollLine_3</td>
<td class="address-2"><span id="34727"></span>87A7</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34728"></span>87A8</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34729"></span>87A9</td>
<td class="instruction">JR NZ,<a href="34667.html#34681">ScrollLine_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34731"></span>
<div class="comments">
<div class="paragraph">
Handle the attributes.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34731"></span>87AB</td>
<td class="instruction">LD HL,$5820</td>
<td class="comment-1" rowspan="4">Move the attributes up one character block.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34734"></span>87AE</td>
<td class="instruction">LD DE,$5800</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34737"></span>87B1</td>
<td class="instruction">LD BC,$0220</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34740"></span>87B4</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34742"></span>87B6</td>
<td class="instruction">LD B,$2A</td>
<td class="comment-1" rowspan="1">Set a counter for $2A spaces.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34744"></span>87B8</td>
<td class="instruction">LD HL,$5020</td>
<td class="comment-1" rowspan="1">Set the target screen location to $5020.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34747"></span>87BB</td>
<td class="instruction">LD C,$01</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=$01 TODO.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34749"></span>87BD</td>
<td class="instruction">LD A,$20</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=ASCII "SPACE".</td>
</tr>
<tr>
<td class="asm-label">ScrollLine_Spacing</td>
<td class="address-2"><span id="34751"></span>87BF</td>
<td class="instruction">CALL <a href="34761.html">PrintPropChar</a></td>
<td class="comment-1" rowspan="1">Call <a href="34761.html">PrintPropChar</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34754"></span>87C2</td>
<td class="instruction">DJNZ <a href="34667.html#34751">ScrollLine_Spacing</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="34667.html#34751">ScrollLine_Spacing</a> until counter is zero.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="34756"></span>
<div class="comments">
<div class="paragraph">
Housekeeping and return.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34756"></span>87C4</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="4">Restore <span class="register">DE</span>, <span class="register">HL</span>, <span class="register">BC</span> and <span class="register">AF</span> off the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34757"></span>87C5</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34758"></span>87C6</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34759"></span>87C7</td>
<td class="instruction">POP AF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="34760"></span>87C8</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="34459.html">869B</a>
</td>
<td class="up">Up: <a href="../maps/all.html#34667">Map</a></td>
<td class="next">
Next: <a href="34761.html">87C9</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1982 Melbourne House</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.5.</div>
</footer>
</body>
</html>